<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Ordo Draconis</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;700&display=swap" rel="stylesheet">
</head>

<body>
<div class="layout">

  <!-- LEVÁ STRANA -->
  <div class="hero-bg hero-home"></div>

  <!-- PRAVÁ STRANA -->
  <aside class="right">

    <div class="side-header">
    <div class="side-logo">Ordo Draconis</div>
      <div class="top-actions">
        <div class="auth">
    <a href="/auth/register.html" class="btn">Registrace</a>
    <a href="/auth/login.html" class="btn">Přihlášení</a>
</div>
          <div class="lang">
          <a href="index.html" class="active">CS</a> | 
          <a href="index-en.html">EN</a>

         <div class="server-status online">
         <span class="dot"></span>
         Online
         <span class="divider">·</span>
         <span class="players"></span>
          </div>
        </div>
      </div>
    </div>

    <nav class="side-nav">
      <a href="/">Domů</a>
      <a href="pages/server.html">O serveru</a>
      <a href="pages/start.html">Začít hrát</a>
      <a href="pages/world.html">Svět</a>
      <a href="pages/donate.html">Donate</a>
      </nav>

    <div class="content-box">

  <h3>Základní nastavení serveru</h3>

  <div class="rates-grid">

    <div class="rate-card">
      <button class="rate-title">XP RATE</button>
      <div class="rate-detail">
        XP rate 3×<br>
        Po levelu 55: 2×<br>
        Po levelu 74: 1×
      </div>
    </div>

    <div class="rate-card">
      <button class="rate-title">SP RATE</button>
      <div class="rate-detail">
        SP rate 3×
      </div>
    </div>

    <div class="rate-card">
      <button class="rate-title">DROP RATE</button>
      <div class="rate-detail">
        Drop rate 4×<br>
        Bossové: 3×<br>
        WB šperky: 2× amount
      </div>
    </div>

    <div class="rate-card">
      <button class="rate-title">SPOIL RATE</button>
      <div class="rate-detail">
        Spoil rate 4×
      </div>
    </div>

  </div>

  <div class="server-extra">
    <p>Fungující pet questy.</p>
    <p>Hrady, geodata, adventurer (RB finder).</p>
    <p>Drop info.</p>
  </div>

</div>
<script>
const rateButtons = document.querySelectorAll('.rate-title');

rateButtons.forEach(button => {
  button.addEventListener('click', () => {
    const currentCard = button.closest('.rate-card');
    const isOpen = currentCard.classList.contains('open');

    // zavřít všechny
    document.querySelectorAll('.rate-card').forEach(card => {
      card.classList.remove('open');
    });

    // pokud nebyla otevřená, otevřít ji
    if (!isOpen) {
      currentCard.classList.add('open');
    }
  });
});
</script>
<script>
async function updateServerStatus() {
  try {
    const res = await fetch('/api/status.php');
    const data = await res.json();

    const dot = document.querySelector('.server-status .dot');
    const players = document.querySelector('.server-status .players');

    if (data.online) {
      dot.style.background = '#2ecc71';
      players.textContent = data.players + ' Hráčů';
    } else {
      dot.style.background = '#e74c3c';
      players.textContent = 'Offline';
    }
  } catch (e) {
    console.error('Status error', e);
  }
}

updateServerStatus();
setInterval(updateServerStatus, 10000);
</script>
</body>
</html>