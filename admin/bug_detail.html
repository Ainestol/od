<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Bug detail | Admin</title>
  <link rel="stylesheet" href="/css/admin.css">
</head>

<body class="admin-page">

<div id="adminHeader"></div>

<main class="auth-container">

    <section class="admin-card">

        <h2 id="bugTitle">Bug detail</h2>

        <p><strong>User:</strong> <span id="bugUser"></span></p>
        <p><strong>Account:</strong> <span id="bugAccount"></span></p>
        <p><strong>Category:</strong> <span id="bugCategory"></span></p>

        <div id="statusBadge" class="status-badge status-new">
            NEW
        </div>

        <label>Status</label>
        <select id="bugStatus">
            <option value="new">NEW</option>
            <option value="in_progress">IN PROGRESS</option>
            <option value="resolved">RESOLVED</option>
            <option value="closed">CLOSED</option>
        </select>

        <hr style="margin:20px 0;">

        <h3>Reported issue (user message)</h3>
        <div class="bug-user-message">
            <pre id="bugUserMessage"></pre>
        </div>

        <hr style="margin:20px 0;">

        <h3>Admin reply</h3>
        <div id="messageHistory"></div>

        <textarea id="adminMessage" rows="4"
            placeholder="Napi≈° odpovƒõƒè‚Ä¶"></textarea>

        <button id="saveBtn" class="btn btn-primary">
            Ulo≈æit
        </button>

    </section>

</main>

<script src="/admin/js/bug_admin_detail.js"></script>

<script>
document.addEventListener('DOMContentLoaded', () => {

  fetch('/admin/partials/admin_header.html')
    .then(r => r.text())
    .then(html => {
      const container = document.getElementById('adminHeader');
      if (!container) return;

      container.innerHTML = html;

      // üîπ zv√Ωraznƒõn√≠ aktu√°ln√≠ str√°nky
      const links = container.querySelectorAll('.auth a');

      links.forEach(link => {
        const linkPath = new URL(link.href).pathname;
        const currentPath = window.location.pathname;

        if (linkPath === currentPath) {
          link.classList.remove('btn');
          link.classList.add('btn-primary');
        }
      });

    })
    .catch(err => {
      console.error('Admin header load error:', err);
    });

});
</script>



</body>

</html>
