<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Admin panel | Ordo Draconis</title>
  <link rel="stylesheet" href="/css/admin.css">
</head>

<body class="admin-page">

<div id="adminHeader"></div>

<main class="auth-container">

  <section class="admin-card">
    <h2>Admin Dashboard</h2>
  </section>

  <div class="admin-grid">

    <div class="admin-card">
      <h3>Bug reports</h3>
      <p>P≈ôehled hl√°≈°en√Ωch chyb od hr√°ƒç≈Ø.</p>
      <a href="/admin/bug_reports.html" class="btn btn-primary">Otev≈ô√≠t</a>
    </div>

    <div class="admin-card">
      <h3>VIP & Wallet</h3>
      <p>Spr√°va VIP, DC a u≈æivatelsk√Ωch v√Ωhod</p>
      <a href="/admin/vip.html" class="btn btn-primary">Otev≈ô√≠t</a>
    </div>

    <div class="admin-card">
      <h3>Online players</h3>
      <p>Aktu√°lnƒõ p≈ôihl√°≈°en√≠ hr√°ƒçi</p>
      <a href="/admin/online_players.html" class="btn btn-primary">Otev≈ô√≠t</a>
    </div>

    <div class="admin-card">
      <h3>Ekonomika</h3>
      <p>√öprava mƒõny a ledger</p>
      <a href="/admin/economy.html" class="btn btn-primary">Otev≈ô√≠t</a>
    </div>

    <div class="admin-card">
      <h3>U≈æivatel√©</h3>
      <p>P≈ôehled WEB ‚Üí GAME ‚Üí CHAR</p>
      <a href="/admin/users.html" class="btn btn-primary">Otev≈ô√≠t</a>
    </div>

  </div>

</main>

<!-- Naƒçten√≠ headeru + aktivn√≠ z√°lo≈æka -->
<script>
fetch('/admin/partials/admin_header.html')
  .then(r => r.text())
  .then(html => {
    document.getElementById('adminHeader').innerHTML = html;

    // üî• zv√Ωraznƒõn√≠ aktivn√≠ str√°nky
    const links = document.querySelectorAll('.admin-nav a');
    const currentPath = window.location.pathname;

    links.forEach(link => {
      if (currentPath.includes(link.getAttribute('href'))) {
        link.classList.add('active');
      }
    });
  });
</script>

<!-- Kontrola admin opr√°vnƒõn√≠ -->
<script>
document.addEventListener('DOMContentLoaded', async () => {
  const res = await fetch('/api/me.php');
  const me = await res.json();

  if (!me.ok || me.role !== 'admin') {
    window.location.replace('/profile/index.html');
  }
});
</script>

</body>
</html>
